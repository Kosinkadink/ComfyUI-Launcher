<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ComfyUI Launcher</title>
  <link rel="stylesheet" href="renderer/styles.css">
</head>
<body>
  <!-- Icon Sprite (Lucide) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="icon-settings" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
      <circle cx="12" cy="12" r="3"/>
    </symbol>
    <symbol id="icon-arrow-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m12 19-7-7 7-7"/>
      <path d="M19 12H5"/>
    </symbol>
    <symbol id="icon-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14"/>
      <path d="M12 5v14"/>
    </symbol>
    <symbol id="icon-box" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
      <path d="m3.3 7 8.7 5 8.7-5"/>
      <path d="M12 22V12"/>
    </symbol>
    <symbol id="icon-folder-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/>
    </symbol>
    <symbol id="icon-loader" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2v4"/>
      <path d="m16.2 7.8 2.9-2.9"/>
      <path d="M18 12h4"/>
      <path d="m16.2 16.2 2.9 2.9"/>
      <path d="M12 18v4"/>
      <path d="m4.9 19.1 2.9-2.9"/>
      <path d="M2 12h4"/>
      <path d="m4.9 4.9 2.9 2.9"/>
    </symbol>
    <symbol id="icon-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="6 3 20 12 6 21 6 3"/>
    </symbol>
  </svg>

  <div class="app-layout">

  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-brand">ComfyUI Launcher</div>
    <div class="sidebar-nav">
      <button class="sidebar-item active" data-sidebar="list">
        <svg width="18" height="18"><use href="#icon-box"/></svg>
        <span data-i18n="sidebar.installations">Installations</span>
      </button>
      <button class="sidebar-item" data-sidebar="running">
        <svg width="18" height="18"><use href="#icon-play"/></svg>
        <span data-i18n="sidebar.running">Running</span>
        <span class="sidebar-error-dot" style="display:none"></span>
        <span class="sidebar-count" style="display:none">0</span>
      </button>
      <button class="sidebar-item" data-sidebar="models">
        <svg width="18" height="18"><use href="#icon-folder-open"/></svg>
        <span data-i18n="models.title">Models</span>
      </button>
      <button class="sidebar-item" data-sidebar="settings">
        <svg width="18" height="18"><use href="#icon-settings"/></svg>
        <span data-i18n="settings.title">Settings</span>
      </button>
    </div>
  </nav>

  <!-- Content Area -->
  <main class="content">

  <!-- Instance List View -->
  <div id="view-list" class="view active">
    <div class="toolbar">
      <div class="breadcrumb"><span class="breadcrumb-current" data-i18n="list.title">Installations</span></div>
      <div class="toolbar-actions">
        <button id="btn-track" data-i18n="list.trackExisting">Track Existing</button>
        <button class="primary add-btn" id="btn-new"><svg width="14" height="14"><use href="#icon-plus"/></svg> <span data-i18n="list.newInstall">New Install</span></button>
      </div>
    </div>
    <div id="list-filter-tabs" class="filter-tabs">
      <button class="filter-tab active" data-filter="all" data-i18n="list.filterAll">All</button>
      <button class="filter-tab" data-filter="local" data-i18n="list.filterLocal">Local</button>
      <button class="filter-tab" data-filter="remote" data-i18n="list.filterRemote">Remote</button>
      <button class="filter-tab" data-filter="cloud" data-i18n="list.filterCloud">Cloud</button>
    </div>
    <div class="view-list-scroll">
      <div id="instance-list" class="instance-list"></div>
    </div>
    <div id="update-banner" class="update-banner" style="display:none"></div>
  </div>

  <!-- Models View -->
  <div id="view-models" class="view">
    <div class="toolbar">
      <div class="breadcrumb"><span class="breadcrumb-current" data-i18n="models.title">Models</span></div>
    </div>
    <div class="view-scroll" id="models-sections"></div>
  </div>

  <!-- Settings View -->
  <div id="view-settings" class="view">
    <div class="toolbar">
      <div class="breadcrumb"><span class="breadcrumb-current" data-i18n="settings.title">Settings</span></div>
    </div>
    <div class="view-scroll" id="settings-sections"></div>
  </div>

  <!-- Running View -->
  <div id="view-running" class="view">
    <div class="toolbar">
      <div class="breadcrumb"><span class="breadcrumb-current" data-i18n="sidebar.running">Running</span></div>
    </div>
    <div class="view-scroll" id="running-list"></div>
  </div>

  </main>
  </div>

  <!-- View Modal: Detail -->
  <div id="modal-detail" class="view-modal">
    <div class="view-modal-content">
      <div class="view-modal-header">
        <div class="view-modal-title" id="detail-modal-title"></div>
        <button class="view-modal-close" data-modal="detail">✕</button>
      </div>
      <div class="view-modal-body">
        <div class="view-scroll" id="detail-sections"></div>
        <div id="detail-bottom-actions"></div>
      </div>
    </div>
  </div>

  <!-- View Modal: Console -->
  <div id="modal-console" class="view-modal">
    <div class="view-modal-content">
      <div class="view-modal-header">
        <div class="view-modal-title" id="console-modal-title"></div>
        <div class="view-modal-header-actions">
          <button id="btn-console-show-window" class="primary" style="display:none" data-i18n="running.showWindow">Show Window</button>
          <button id="btn-console-browser" data-i18n="console.openInBrowser">Open in Browser</button>
          <button class="danger" id="btn-console-stop" data-i18n="console.stop">Stop</button>
        </div>
        <button class="view-modal-close" data-modal="console">✕</button>
      </div>
      <div class="view-modal-body">
        <div class="terminal-output" id="console-terminal"></div>
      </div>
    </div>
  </div>

  <!-- View Modal: Progress -->
  <div id="modal-progress" class="view-modal">
    <div class="view-modal-content">
      <div class="view-modal-header">
        <div class="view-modal-title" id="progress-modal-title"></div>
        <div class="view-modal-header-actions">
          <button class="danger" id="btn-progress-cancel" style="display:none" data-i18n="common.cancel">Cancel</button>
        </div>
        <button class="view-modal-close" data-modal="progress">✕</button>
      </div>
      <div class="view-modal-body">
        <div class="view-scroll" id="progress-content"></div>
      </div>
    </div>
  </div>

  <!-- View Modal: New Install -->
  <div id="modal-new" class="view-modal">
    <div class="view-modal-content">
      <div class="view-modal-header">
        <div class="view-modal-title" id="new-modal-title"></div>
        <button class="view-modal-close" data-modal="new">✕</button>
      </div>
      <div class="view-modal-body">
        <div class="view-scroll">
          <div id="detected-gpu" class="detected-hardware"></div>
          <div class="field">
            <label for="inst-name" data-i18n="common.name">Name</label>
            <input type="text" id="inst-name" placeholder="e.g. ComfyUI Main">
          </div>
          <div class="field">
            <label for="source" data-i18n="newInstall.installMethod">Install Method</label>
            <select id="source" disabled><option>Loading…</option></select>
          </div>
          <div id="source-fields"></div>
          <div class="field">
            <label for="inst-path" data-i18n="newInstall.installLocation">Install Location</label>
            <div class="path-input">
              <input type="text" id="inst-path" placeholder="Loading…" readonly>
              <button id="btn-browse" type="button" data-i18n="common.browse">Browse…</button>
            </div>
          </div>
        </div>
        <div class="view-bottom">
          <button class="primary" id="btn-save" disabled data-i18n="newInstall.addInstallation">Add Installation</button>
        </div>
      </div>
    </div>
  </div>

  <!-- View Modal: Track Existing -->
  <div id="modal-track" class="view-modal">
    <div class="view-modal-content">
      <div class="view-modal-header">
        <div class="view-modal-title" id="track-modal-title"></div>
        <button class="view-modal-close" data-modal="track">✕</button>
      </div>
      <div class="view-modal-body">
        <div class="view-scroll">
          <div class="field">
            <label for="track-path" data-i18n="track.installDir">Installation Directory</label>
            <div class="path-input">
              <input type="text" id="track-path" placeholder="Select a directory…" readonly>
              <button id="btn-track-browse" type="button" data-i18n="common.browse">Browse…</button>
            </div>
          </div>
          <div class="field">
            <label for="track-source" data-i18n="track.detectedType">Detected Type</label>
            <select id="track-source" disabled><option>Browse to a directory first</option></select>
          </div>
          <div class="field">
            <label for="track-name" data-i18n="common.name">Name</label>
            <input type="text" id="track-name" placeholder="e.g. ComfyUI Main">
          </div>
          <div id="track-detail"></div>
        </div>
        <div class="view-bottom">
          <button class="primary" id="btn-track-save" disabled data-i18n="track.trackInstallation">Track Installation</button>
        </div>
      </div>
    </div>
  </div>

  <!-- modal.js replaced by Vue 3 PoC -->
  <script type="module" src="renderer/main.js"></script>
</body>
</html>
