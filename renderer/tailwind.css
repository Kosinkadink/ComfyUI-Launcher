@import "tailwindcss";

/*
 * ComfyUI Launcher — Tailwind CSS 4 entry file
 *
 * This file maps the existing CSS custom properties (renderer/styles.css lines 4–32)
 * to Tailwind theme tokens using the CSS-first @theme directive.
 *
 * The existing theming mechanism (data-theme attribute on <html>) is preserved.
 * Tailwind utilities like bg-bg, text-text, border-border resolve to CSS variables
 * that automatically update when the theme switches.
 */

/* ── Theme variable definitions (unchanged from renderer/styles.css) ────────── */

[data-theme="dark"] {
  --bg: #171718;
  --text: #ffffff;
  --text-muted: #9c9eab;
  --text-faint: #55565e;
  --accent: #0b8ce9;
  --accent-hover: #31b9f4;
  --surface: #262729;
  --border: #3c3d42;
  --border-hover: #494a50;
  --danger: #b33a3a;
  --terminal-bg: #111112;
  --overlay-bg: rgba(0, 0, 0, 0.55);
}

[data-theme="light"] {
  --bg: #ffffff;
  --text: #444444;
  --text-muted: #828282;
  --text-faint: #b4b4b4;
  --accent: #31b9f4;
  --accent-hover: #185a8b;
  --surface: #e9e9e9;
  --border: #d9d9d9;
  --border-hover: #b4b4b4;
  --danger: #c02323;
  --terminal-bg: #f3f3f3;
  --overlay-bg: rgba(0, 0, 0, 0.35);
}

/*
 * Map CSS variables to Tailwind theme tokens.
 *
 * Using @theme inline so utilities resolve to var(--bg), var(--text), etc.
 * at compile time. This means Tailwind generates:
 *   .bg-bg { background-color: var(--bg); }
 * which automatically picks up the correct value from [data-theme].
 */
@theme inline {
  --color-bg: var(--bg);
  --color-text: var(--text);
  --color-text-muted: var(--text-muted);
  --color-text-faint: var(--text-faint);
  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
  --color-surface: var(--surface);
  --color-border: var(--border);
  --color-border-hover: var(--border-hover);
  --color-danger: var(--danger);
  --color-terminal-bg: var(--terminal-bg);
  --color-overlay-bg: var(--overlay-bg);

  --font-mono: "Cascadia Mono", "Consolas", monospace;
}

/* ── Scrollbar styling (Chromium-specific, cannot be utility-ified) ──────── */

::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--border-hover); }

/* ── Component-layer classes for complex CSS that stays as custom rules ───── */

@layer components {
  /*
   * Toggle switch (checkbox)
   * Lines 213–237 in renderer/styles.css
   * Uses ::after pseudo-element — not practical as pure utilities.
   */
  input[type="checkbox"] {
    appearance: none;
    width: 36px;
    height: 20px;
    background: var(--border);
    border-radius: 10px;
    position: relative;
    cursor: pointer;
    margin-top: 8px;
    transition: background 0.2s;
    flex-shrink: 0;
  }
  input[type="checkbox"]::after {
    content: "";
    position: absolute;
    top: 2px;
    left: 2px;
    width: 16px;
    height: 16px;
    background: var(--text);
    border-radius: 50%;
    transition: transform 0.2s;
  }
  input[type="checkbox"]:checked { background: var(--accent); }
  input[type="checkbox"]:checked::after { transform: translateX(16px); }

  /*
   * Loading spinner (button::after pseudo-element)
   * Lines 180–194 in renderer/styles.css
   */
  .btn-loading {
    opacity: 0.7;
    pointer-events: none;
  }
  .btn-loading::after {
    content: "";
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-left: 6px;
    border: 2px solid var(--text-faint);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: btn-spin 0.6s linear infinite;
    vertical-align: middle;
  }

  /*
   * Progress bar indeterminate animation
   * Lines 491–499 in renderer/styles.css
   */
  .progress-fill-indeterminate {
    animation: indeterminate 1.5s ease-in-out infinite;
    background: linear-gradient(90deg, var(--accent) 0%, var(--accent-hover) 50%, var(--accent) 100%);
    background-size: 200% 100%;
  }

  /*
   * Drag handle (multi-span grip pattern)
   * Lines 307–324 in renderer/styles.css
   */
  .drag-handle {
    display: flex;
    flex-direction: column;
    gap: 3px;
    padding: 8px 10px 8px 2px;
    cursor: grab;
    opacity: 0.35;
    transition: opacity 0.15s;
  }
  .drag-handle:hover { opacity: 0.7; }
  .drag-handle:active { cursor: grabbing; }
  .drag-handle span {
    display: block;
    width: 16px;
    height: 2px;
    background: var(--text);
    border-radius: 1px;
  }

  /*
   * Filter tab active indicator (::after pseudo-element)
   * Lines 283–292 in renderer/styles.css
   */
  .filter-tab-active::after {
    content: "";
    position: absolute;
    bottom: -1px;
    left: 4px;
    right: 4px;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
  }
}

/* ── Keyframes ──────────────────────────────────────────────────────────────── */

@keyframes btn-spin {
  to { transform: rotate(360deg); }
}
@keyframes indeterminate {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
